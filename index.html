<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastAPI Secret Preview</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê –ü–µ—Ä–µ–≥–ª—è–¥ —Å–µ–∫—Ä–µ—Ç–Ω–∏—Ö –¥–∞–Ω–∏—Ö</h1>
            <p class="subtitle">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –º–∞—Å–∫—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤</p>
        </header>

        <main>
            <button id="fetchBtn" class="fetch-button">–û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é</button>
            
            <div id="loading" class="loading hidden">
                <div class="spinner"></div>
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>

            <div id="result" class="result hidden">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h2>
                <div class="info-card">
                    <div class="info-item">
                        <span class="label">–°—Ç–∞—Ç—É—Å:</span>
                        <span id="status" class="value"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:</span>
                        <span id="message" class="value"></span>
                    </div>
                    <div class="info-item highlight">
                        <span class="label">–ú–∞—Å–∫–æ–≤–∞–Ω–∏–π —Å–µ–∫—Ä–µ—Ç:</span>
                        <span id="secretPreview" class="value secret-value"></span>
                    </div>
                </div>
            </div>

            <div id="error" class="error hidden">
                <h3>‚ùå –ü–æ–º–∏–ª–∫–∞</h3>
                <p id="errorMessage"></p>
            </div>
        </main>

        <footer>
            <p>–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –±–µ–∫–µ–Ω–¥ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 8000</p>
        </footer>
    </div>

    <script>
        const fetchBtn = document.getElementById('fetchBtn');
        const loading = document.getElementById('loading');
        const result = document.getElementById('result');
        const error = document.getElementById('error');
        const statusEl = document.getElementById('status');
        const messageEl = document.getElementById('message');
        const secretPreviewEl = document.getElementById('secretPreview');
        const errorMessageEl = document.getElementById('errorMessage');

        fetchBtn.addEventListener('click', async () => {
            // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
            result.classList.add('hidden');
            error.classList.add('hidden');
            loading.classList.remove('hidden');
            fetchBtn.disabled = true;

            try {
                const response = await fetch('http://localhost:8000/api/info');
                
                if (!response.ok) {
                    throw new Error(`HTTP –ø–æ–º–∏–ª–∫–∞! —Å—Ç–∞—Ç—É—Å: ${response.status}`);
                }

                const data = await response.json();
                
                // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ –¥–∞–Ω—ñ
                statusEl.textContent = data.status || 'N/A';
                messageEl.textContent = data.message || 'N/A';
                secretPreviewEl.textContent = data.secret_preview || 'N/A';
                
                loading.classList.add('hidden');
                result.classList.remove('hidden');
            } catch (err) {
                loading.classList.add('hidden');
                errorMessageEl.textContent = err.message;
                error.classList.remove('hidden');
            } finally {
                fetchBtn.disabled = false;
            }
        });
    </script>
</body>
</html>

